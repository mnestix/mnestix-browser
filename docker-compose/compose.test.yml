services:
  cypress-test:
    container_name: cypress-test
    profiles: ["", "tests"]
    build:
      dockerfile: cypress.dockerfile
    environment:
      CYPRESS_BASE_URL: 'http://mnestix-browser:3000'
      CYPRESS_AAS_REPO_API_URL: 'http://mnestix-api:5064/repo'
      CYPRESS_MNESTIX_BACKEND_API_URL: 'http://mnestix-api:5064'
      CYPRESS_AAS_DISCOVERY_API_URL: 'http://mnestix-api:5064/discovery'
      ELECTRON_ENABLE_LOGGING: 1
    volumes:
      - ../cypress-artifacts/screenshots:/cypress_Tests/cypress/screenshots
      - ../cypress-artifacts/videos:/cypress_Tests/cypress/videos
    depends_on:
      - mnestix-browser
      - mnestix-api
      - aas-repository
    networks:
      - mnestix-network
